<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Pomodoro Timer - Focus & Productivity</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free Pomodoro timer for better focus and productivity" />
	<meta name="keywords" content="pomodoro timer, focus timer, productivity, study timer" />
	<meta name="author" content="Yusuf Morsi" />

	<!-- Favicon -->
	<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='12' fill='%231e3a8a'/%3E%3Cpath d='M20 25 L20 75 L80 75 L80 45 L60 45 L60 25 Z' fill='white'/%3E%3Cpath d='M60 25 L60 45 L80 45 Z' fill='%233b82f6'/%3E%3C/svg%3E">

	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		:root {
			--blue-primary: #1e3a8a;
			--blue-dark: #1e40af;
			--blue-light: #3b82f6;
			--blue-hover: #2563eb;
			--green: #10b981;
			--red: #ef4444;
			--text-dark: #1e293b;
			--text-medium: #475569;
			--bg-white: #ffffff;
			--bg-light: #f1f5f9;
			--border-color: #e2e8f0;
		}

		body {
			font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: var(--text-dark);
			min-height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
			padding: 2rem;
			position: relative;
		}

		#logo {
			position: absolute;
			top: 10px;
			left: 10px;
			cursor: pointer;
			display: flex;
			align-items: center;
			z-index: 1000;
		}
		#logo img {
			width: 40px;
			height: 40px;
			border-radius: 50%;
		}
		#logo .tooltip {
			position: absolute;
			left: 50px;
			background: rgba(0, 0, 0, 0.8);
			color: white;
			padding: 5px 10px;
			border-radius: 4px;
			font-size: 12px;
			white-space: nowrap;
			opacity: 0;
			visibility: hidden;
			transform: translateX(-10px);
			transition: opacity 0.3s, visibility 0.3s, transform 0.3s;
			pointer-events: none;
		}
		#logo img:hover + .tooltip,
		#logo .tooltip:hover {
			opacity: 1;
			visibility: visible;
			transform: translateX(0);
		}

		.container {
			background: white;
			border-radius: 20px;
			padding: 3rem;
			box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
			max-width: 600px;
			width: 100%;
			text-align: center;
		}

		.header {
			margin-bottom: 2rem;
		}

		.header h1 {
			font-size: 2.5rem;
			font-weight: 700;
			color: var(--blue-primary);
			margin-bottom: 0.5rem;
		}

		.header p {
			color: var(--text-medium);
			font-size: 1rem;
		}

		.timer-display {
			font-size: 5rem;
			font-weight: 700;
			color: var(--blue-primary);
			margin: 2rem 0;
			font-variant-numeric: tabular-nums;
		}

		.mode-indicator {
			font-size: 1.25rem;
			color: var(--text-medium);
			margin-bottom: 1rem;
			font-weight: 600;
		}

		.mode-indicator.work {
			color: var(--blue-primary);
		}

		.mode-indicator.break {
			color: var(--green);
		}

		.controls {
			display: flex;
			gap: 1rem;
			justify-content: center;
			margin: 2rem 0;
		}

		.btn {
			padding: 1rem 2rem;
			border: none;
			border-radius: 12px;
			font-size: 1rem;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.2s ease;
			display: flex;
			align-items: center;
			gap: 0.5rem;
		}

		.btn-primary {
			background: var(--blue-primary);
			color: white;
		}

		.btn-primary:hover {
			background: var(--blue-hover);
		}

		.btn-secondary {
			background: var(--bg-light);
			color: var(--text-dark);
		}

		.btn-secondary:hover {
			background: var(--border-color);
		}

		.btn-danger {
			background: var(--red);
			color: white;
		}

		.btn-danger:hover {
			background: #dc2626;
		}

		.settings {
			margin-top: 2rem;
			padding-top: 2rem;
			border-top: 2px solid var(--border-color);
		}

		.settings h3 {
			font-size: 1.25rem;
			margin-bottom: 1rem;
			color: var(--text-dark);
		}

		.setting-group {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 1rem;
			margin-bottom: 1rem;
		}

		.setting-item {
			text-align: left;
		}

		.setting-item label {
			display: block;
			margin-bottom: 0.5rem;
			font-weight: 600;
			color: var(--text-medium);
			font-size: 0.9rem;
		}

		.setting-item input {
			width: 100%;
			padding: 0.75rem;
			border: 2px solid var(--border-color);
			border-radius: 8px;
			font-size: 1rem;
			font-family: inherit;
		}

		.setting-item input:focus {
			outline: none;
			border-color: var(--blue-primary);
		}

		.footer {
			margin-top: 2rem;
			padding-top: 2rem;
			border-top: 2px solid var(--border-color);
		}

		.footer a {
			color: var(--blue-primary);
			text-decoration: none;
			font-weight: 500;
			display: inline-flex;
			align-items: center;
			gap: 0.5rem;
		}

		.footer a:hover {
			color: var(--blue-hover);
		}

		.progress-bar {
			width: 100%;
			height: 8px;
			background: var(--bg-light);
			border-radius: 4px;
			overflow: hidden;
			margin: 1rem 0;
		}

		.progress-fill {
			height: 100%;
			background: var(--blue-primary);
			transition: width 0.3s ease;
			width: 0%;
		}

		.progress-fill.break {
			background: var(--green);
		}

		@media screen and (max-width: 768px) {
			.container {
				padding: 2rem 1.5rem;
			}

			.timer-display {
				font-size: 4rem;
			}

			.controls {
				flex-direction: column;
			}

			.btn {
				width: 100%;
				justify-content: center;
			}
		}
	</style>
</head>

<body>
	<div id="logo" onclick="window.location.href='https://ymorsi.com';">
		<img src="images/smiling.png" alt="YM Home">
		<div class="tooltip">YM - Home</div>
	</div>
	<div class="container">
		<div class="header">
			<h1><i class="fas fa-clock"></i> Pomodoro Timer</h1>
			<p>Focus for 50 minutes, rest for 10 minutes</p>
			<p id="notification-status" style="font-size: 0.85rem; margin-top: 0.5rem; color: var(--text-medium); display: none;">
				<i class="fas fa-bell"></i> <span id="notification-text"></span>
			</p>
		</div>

		<div class="mode-indicator work" id="mode-indicator">Work Session</div>
		
		<div class="timer-display" id="timer">50:00</div>

		<div class="progress-bar">
			<div class="progress-fill" id="progress"></div>
		</div>

		<div class="controls">
			<button class="btn btn-primary" id="start-btn">
				<i class="fas fa-play"></i> Start
			</button>
			<button class="btn btn-secondary" id="pause-btn" style="display: none;">
				<i class="fas fa-pause"></i> Pause
			</button>
			<button class="btn btn-danger" id="reset-btn">
				<i class="fas fa-redo"></i> Reset
			</button>
		</div>

		<div class="settings">
			<h3>Timer Settings</h3>
			<div class="setting-group">
				<div class="setting-item">
					<label>Work Duration (minutes)</label>
					<input type="number" id="work-duration" value="50" min="1" max="120">
				</div>
				<div class="setting-item">
					<label>Break Duration (minutes)</label>
					<input type="number" id="break-duration" value="10" min="1" max="60">
				</div>
			</div>
		</div>

		<div class="footer">
			<a href="index.html">
				<i class="fas fa-arrow-left"></i> Back to Portfolio
			</a>
			<span style="margin: 0 1rem; color: var(--text-medium);">|</span>
			<a href="tools.html">
				<i class="fas fa-tools"></i> More Tools
			</a>
		</div>
	</div>

	<script>
		let timerInterval = null;
		let timeLeft = 50 * 60; // 50 minutes in seconds
		let isRunning = false;
		let isWorkMode = true;
		let workDuration = 50;
		let breakDuration = 10;
		let totalTime = 50 * 60;
		let endTime = null; // Track when timer should end (for background accuracy)

		const timerDisplay = document.getElementById('timer');
		const modeIndicator = document.getElementById('mode-indicator');
		const progressBar = document.getElementById('progress');
		const startBtn = document.getElementById('start-btn');
		const pauseBtn = document.getElementById('pause-btn');
		const resetBtn = document.getElementById('reset-btn');
		const workInput = document.getElementById('work-duration');
		const breakInput = document.getElementById('break-duration');
		const notificationStatus = document.getElementById('notification-status');
		const notificationText = document.getElementById('notification-text');

		// Update notification status message
		function updateNotificationStatus() {
			if ('Notification' in window) {
				notificationStatus.style.display = 'block';
				if (Notification.permission === 'granted') {
					notificationText.textContent = 'Notifications enabled - timer works even when tab is inactive';
					notificationText.style.color = 'var(--green)';
				} else if (Notification.permission === 'denied') {
					notificationText.textContent = 'Notifications blocked - enable in browser settings for background alerts';
					notificationText.style.color = 'var(--red)';
				} else {
					notificationText.textContent = 'Click Start to enable notifications for background alerts';
					notificationText.style.color = 'var(--text-medium)';
				}
			} else {
				notificationStatus.style.display = 'none';
			}
		}

		// Request notification permission on page load
		if ('Notification' in window && Notification.permission === 'default') {
			Notification.requestPermission().then(() => updateNotificationStatus());
		}

		// Update status on load
		updateNotificationStatus();

		function showNotification(title, body) {
			if ('Notification' in window && Notification.permission === 'granted') {
				const notification = new Notification(title, {
					body: body,
					icon: 'images/smiling.png',
					badge: 'images/smiling.png',
					tag: 'pomodoro-timer',
					requireInteraction: true
				});

				// Close notification after 5 seconds
				setTimeout(() => notification.close(), 5000);

				// Focus window when notification is clicked
				notification.onclick = () => {
					window.focus();
					notification.close();
				};
			}
		}

		function playAlarm() {
			// Play sound multiple times over a longer period to ensure it's not missed
			const playSound = () => {
				try {
					const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIGWi77+efTRAMUKfj8LZjHAY4kdfyzHksBSR3x/DdkEAKFF606euoVRQKRp/g8r5sIQUrgc7y2Yk2CBlo');
					audio.volume = 0.8;
					audio.play().catch(() => {});
				} catch (e) {}
			};

			// Play sound multiple times over 10 seconds to ensure it's heard
			playSound();                    // 0ms
			setTimeout(playSound, 300);     // 300ms
			setTimeout(playSound, 600);      // 600ms
			setTimeout(playSound, 1000);     // 1s
			setTimeout(playSound, 2000);     // 2s
			setTimeout(playSound, 3000);     // 3s
			setTimeout(playSound, 4000);     // 4s
			setTimeout(playSound, 5000);     // 5s
			setTimeout(playSound, 7000);     // 7s
			setTimeout(playSound, 10000);    // 10s
		}

		function updateDisplay() {
			const minutes = Math.floor(timeLeft / 60);
			const seconds = timeLeft % 60;
			timerDisplay.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
			
			const progress = ((totalTime - timeLeft) / totalTime) * 100;
			progressBar.style.width = progress + '%';
		}

		function calculateTimeLeft() {
			if (endTime && isRunning) {
				const now = Date.now();
				const remaining = Math.max(0, Math.floor((endTime - now) / 1000));
				return remaining;
			}
			return timeLeft;
		}

		function startTimer() {
			if (timerInterval) return;
			
			// Request notification permission if not already granted
			if ('Notification' in window && Notification.permission === 'default') {
				Notification.requestPermission().then(() => updateNotificationStatus());
			}
			
			isRunning = true;
			startBtn.style.display = 'none';
			pauseBtn.style.display = 'inline-flex';
			
			// Set end time based on current timeLeft
			endTime = Date.now() + (timeLeft * 1000);
			
			timerInterval = setInterval(() => {
				timeLeft = calculateTimeLeft();
				updateDisplay();
				
				if (timeLeft <= 0) {
					clearInterval(timerInterval);
					timerInterval = null;
					endTime = null;
					
					// Switch mode
					if (isWorkMode) {
						isWorkMode = false;
						timeLeft = breakDuration * 60;
						totalTime = breakDuration * 60;
						modeIndicator.textContent = 'Break Time!';
						modeIndicator.className = 'mode-indicator break';
						progressBar.className = 'progress-fill break';
						document.body.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
					} else {
						isWorkMode = true;
						timeLeft = workDuration * 60;
						totalTime = workDuration * 60;
						modeIndicator.textContent = 'Work Session';
						modeIndicator.className = 'mode-indicator work';
						progressBar.className = 'progress-fill';
						document.body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
					}
					
					updateDisplay();
					
					// Show notification and play alarm (works even when tab is inactive)
					if (isWorkMode) {
						showNotification('Break Time! ðŸŽ‰', `Your ${workDuration}-minute work session is complete. Time for a ${breakDuration}-minute break!`);
					} else {
						showNotification('Work Session! ðŸ’ª', `Break is over. Time to focus for ${workDuration} minutes!`);
					}
					playAlarm();
					
					// Auto-start next session
					setTimeout(() => {
						if (confirm(isWorkMode ? 'Start work session?' : 'Start break?')) {
							startTimer();
						} else {
							isRunning = false;
							startBtn.style.display = 'inline-flex';
							pauseBtn.style.display = 'none';
						}
					}, 1000);
				}
			}, 1000);
		}

		function pauseTimer() {
			if (timerInterval) {
				clearInterval(timerInterval);
				timerInterval = null;
				isRunning = false;
				endTime = null;
				startBtn.style.display = 'inline-flex';
				pauseBtn.style.display = 'none';
			}
		}

		function resetTimer() {
			pauseTimer();
			isWorkMode = true;
			workDuration = parseInt(workInput.value) || 50;
			breakDuration = parseInt(breakInput.value) || 10;
			timeLeft = workDuration * 60;
			totalTime = workDuration * 60;
			endTime = null;
			modeIndicator.textContent = 'Work Session';
			modeIndicator.className = 'mode-indicator work';
			progressBar.className = 'progress-fill';
			document.body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
			updateDisplay();
		}

		startBtn.addEventListener('click', startTimer);
		pauseBtn.addEventListener('click', pauseTimer);
		resetBtn.addEventListener('click', resetTimer);

		workInput.addEventListener('change', () => {
			if (!isRunning) {
				workDuration = parseInt(workInput.value) || 50;
				if (isWorkMode) {
					timeLeft = workDuration * 60;
					totalTime = workDuration * 60;
					updateDisplay();
				}
			}
		});

		breakInput.addEventListener('change', () => {
			if (!isRunning) {
				breakDuration = parseInt(breakInput.value) || 10;
				if (!isWorkMode) {
					timeLeft = breakDuration * 60;
					totalTime = breakDuration * 60;
					updateDisplay();
				}
			}
		});

		// Handle tab visibility changes to keep timer accurate when switching tabs
		document.addEventListener('visibilitychange', () => {
			if (!document.hidden && isRunning && endTime) {
				// Tab became visible - recalculate time left
				timeLeft = calculateTimeLeft();
				updateDisplay();
			}
		});

		updateDisplay();
	</script>
</body>

</html>

